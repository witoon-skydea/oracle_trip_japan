<h1>แก้ไขรีวิว <%= review.title %></h1>

<% if (typeof error !== 'undefined') { %>
  <div class="alert alert-danger">
    <p><%= error %></p>
  </div>
<% } %>

<form action="/reviews/<%= review._id %>?_method=PUT" method="POST">
  <div class="form-group">
    <label for="rating">คะแนน</label>
    <div class="rating-input">
      <% for(let i = 5; i >= 1; i--) { %>
        <input type="radio" id="star<%= i %>" name="rating" value="<%= i %>" <%= i === review.rating ? 'checked' : '' %> required>
        <label for="star<%= i %>">★</label>
      <% } %>
    </div>
  </div>
  
  <div class="form-group">
    <label for="title">หัวข้อรีวิว</label>
    <input
      type="text"
      id="title"
      name="title"
      class="form-control"
      value="<%= review.title %>"
      required
    >
  </div>
  
  <div class="form-group">
    <label for="comment">ความคิดเห็น</label>
    <textarea
      id="comment"
      name="comment"
      class="form-control"
      rows="5"
      required
    ><%= review.comment %></textarea>
  </div>
  
  <div class="form-group">
    <label for="visit_date">วันที่เข้าชม</label>
    <input
      type="date"
      id="visit_date"
      name="visit_date"
      class="form-control"
      value="<%= review.visit_date ? review.visit_date.toISOString().split('T')[0] : '' %>"
    >
  </div>
  
  <div class="form-actions">
    <button type="submit" class="btn btn-primary">บันทึกการเปลี่ยนแปลง</button>
    <a href="/attractions/<%= review.attraction %>#reviews" class="btn btn-outline-secondary">ยกเลิก</a>
  </div>
</form>
